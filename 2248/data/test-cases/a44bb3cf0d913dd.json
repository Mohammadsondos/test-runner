{"uid":"a44bb3cf0d913dd","name":"test_can_create_connection[Test for Pichiu, url: wss://pichiu.api.onfinality.io/public-ws]","fullName":"tests.test_nodes_availability#test_can_create_connection","historyId":"5d38ef88a22293e2d22b76dd74c65b9f","time":{"start":1673366744972,"stop":1673366804862,"duration":59890},"status":"broken","statusMessage":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","statusTrace":"data = {'name': 'Pichiu', 'url': 'wss://pichiu.api.onfinality.io/public-ws'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(chains), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:145: in _get_resp_headers\n    status, resp_headers, status_message = read_headers(sock)\n../../../../.local/lib/python3.10/site-packages/websocket/_http.py:312: in read_headers\n    line = recv_line(sock)\n../../../../.local/lib/python3.10/site-packages/websocket/_socket.py:131: in recv_line\n    c = recv(sock, 1)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nbufsize = 1\n\n    def recv(sock, bufsize):\n        if not sock:\n            raise WebSocketConnectionClosedException(\"socket is already closed.\")\n    \n        def _recv():\n            try:\n                return sock.recv(bufsize)\n            except SSLWantReadError:\n                pass\n            except socket.error as exc:\n                error_code = extract_error_code(exc)\n                if error_code != errno.EAGAIN and error_code != errno.EWOULDBLOCK:\n                    raise\n    \n            sel = selectors.DefaultSelector()\n            sel.register(sock, selectors.EVENT_READ)\n    \n            r = sel.select(sock.gettimeout())\n            sel.close()\n    \n            if r:\n                return sock.recv(bufsize)\n    \n        try:\n            if sock.gettimeout() == 0:\n                bytes_ = sock.recv(bufsize)\n            else:\n                bytes_ = _recv()\n        except TimeoutError:\n            raise WebSocketTimeoutException(\"Connection timed out\")\n        except socket.timeout as e:\n            message = extract_err_message(e)\n            raise WebSocketTimeoutException(message)\n        except SSLError as e:\n            message = extract_err_message(e)\n            if isinstance(message, str) and 'timed out' in message:\n                raise WebSocketTimeoutException(message)\n            else:\n                raise\n    \n        if not bytes_:\n>           raise WebSocketConnectionClosedException(\n                \"Connection to remote host was lost.\")\nE           websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.\n\n../../../../.local/lib/python3.10/site-packages/websocket/_socket.py:122: WebSocketConnectionClosedException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","statusTrace":"data = {'name': 'Pichiu', 'url': 'wss://pichiu.api.onfinality.io/public-ws'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(chains), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:145: in _get_resp_headers\n    status, resp_headers, status_message = read_headers(sock)\n../../../../.local/lib/python3.10/site-packages/websocket/_http.py:312: in read_headers\n    line = recv_line(sock)\n../../../../.local/lib/python3.10/site-packages/websocket/_socket.py:131: in recv_line\n    c = recv(sock, 1)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nbufsize = 1\n\n    def recv(sock, bufsize):\n        if not sock:\n            raise WebSocketConnectionClosedException(\"socket is already closed.\")\n    \n        def _recv():\n            try:\n                return sock.recv(bufsize)\n            except SSLWantReadError:\n                pass\n            except socket.error as exc:\n                error_code = extract_error_code(exc)\n                if error_code != errno.EAGAIN and error_code != errno.EWOULDBLOCK:\n                    raise\n    \n            sel = selectors.DefaultSelector()\n            sel.register(sock, selectors.EVENT_READ)\n    \n            r = sel.select(sock.gettimeout())\n            sel.close()\n    \n            if r:\n                return sock.recv(bufsize)\n    \n        try:\n            if sock.gettimeout() == 0:\n                bytes_ = sock.recv(bufsize)\n            else:\n                bytes_ = _recv()\n        except TimeoutError:\n            raise WebSocketTimeoutException(\"Connection timed out\")\n        except socket.timeout as e:\n            message = extract_err_message(e)\n            raise WebSocketTimeoutException(message)\n        except SSLError as e:\n            message = extract_err_message(e)\n            if isinstance(message, str) and 'timed out' in message:\n                raise WebSocketTimeoutException(message)\n            else:\n                raise\n    \n        if not bytes_:\n>           raise WebSocketConnectionClosedException(\n                \"Connection to remote host was lost.\")\nE           websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.\n\n../../../../.local/lib/python3.10/site-packages/websocket/_socket.py:122: WebSocketConnectionClosedException","steps":[],"attachments":[{"uid":"3fa1089d24cd5609","name":"stdout","source":"3fa1089d24cd5609.txt","type":"text/plain","size":254}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_nodes_availability"},{"name":"host","value":"fv-az174-393"},{"name":"thread","value":"1716-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_nodes_availability"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"data","value":"{'url': 'wss://pichiu.api.onfinality.io/public-ws', 'name': 'Pichiu'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"14afcdff5e0fa806","status":"broken","statusDetails":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","time":{"start":1673366675045,"stop":1673366734862,"duration":59817}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":66,"skipped":0,"passed":449,"unknown":0,"total":515},"items":[{"uid":"311a1dfbfa676a8b","reportUrl":"https://nova-wallet.github.io/test-runner/2247//#testresult/311a1dfbfa676a8b","status":"broken","statusDetails":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","time":{"start":1673352395342,"stop":1673352455247,"duration":59905}},{"uid":"3bb3e9b38c55b795","reportUrl":"https://nova-wallet.github.io/test-runner/2246//#testresult/3bb3e9b38c55b795","status":"broken","statusDetails":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","time":{"start":1673338001985,"stop":1673338061260,"duration":59275}},{"uid":"fcbcb6d7962a5713","reportUrl":"https://nova-wallet.github.io/test-runner/2245//#testresult/fcbcb6d7962a5713","status":"passed","time":{"start":1673323537002,"stop":1673323585325,"duration":48323}},{"uid":"5e51d4196f537075","reportUrl":"https://nova-wallet.github.io/test-runner/2244//#testresult/5e51d4196f537075","status":"passed","time":{"start":1673309675243,"stop":1673309702580,"duration":27337}},{"uid":"66388c1e870f12f2","reportUrl":"https://nova-wallet.github.io/test-runner/2243//#testresult/66388c1e870f12f2","status":"passed","time":{"start":1673294661464,"stop":1673294661803,"duration":339}},{"uid":"bdc55529cebc5c13","reportUrl":"https://nova-wallet.github.io/test-runner/2242//#testresult/bdc55529cebc5c13","status":"passed","time":{"start":1673280399526,"stop":1673280400639,"duration":1113}},{"uid":"fbce588705f146dc","reportUrl":"https://nova-wallet.github.io/test-runner/2241//#testresult/fbce588705f146dc","status":"passed","time":{"start":1673266022364,"stop":1673266081077,"duration":58713}},{"uid":"b63155ae48511521","reportUrl":"https://nova-wallet.github.io/test-runner/2240//#testresult/b63155ae48511521","status":"passed","time":{"start":1673251490321,"stop":1673251490362,"duration":41}},{"uid":"f8af8c087b8ee065","reportUrl":"https://nova-wallet.github.io/test-runner/2239//#testresult/f8af8c087b8ee065","status":"passed","time":{"start":1673237084017,"stop":1673237084366,"duration":349}},{"uid":"a2ff744e18729e38","reportUrl":"https://nova-wallet.github.io/test-runner/2238//#testresult/a2ff744e18729e38","status":"passed","time":{"start":1673223298234,"stop":1673223298291,"duration":57}},{"uid":"707ddcb75862115a","reportUrl":"https://nova-wallet.github.io/test-runner/2237//#testresult/707ddcb75862115a","status":"passed","time":{"start":1673208255373,"stop":1673208255686,"duration":313}},{"uid":"867b2b445067000e","reportUrl":"https://nova-wallet.github.io/test-runner/2236//#testresult/867b2b445067000e","status":"passed","time":{"start":1673193858713,"stop":1673193858808,"duration":95}},{"uid":"31b0fbe5f70d4322","reportUrl":"https://nova-wallet.github.io/test-runner/2235//#testresult/31b0fbe5f70d4322","status":"passed","time":{"start":1673179497147,"stop":1673179497187,"duration":40}},{"uid":"4b0895ff033cf208","reportUrl":"https://nova-wallet.github.io/test-runner/2234//#testresult/4b0895ff033cf208","status":"passed","time":{"start":1673165082146,"stop":1673165124148,"duration":42002}},{"uid":"cee6e0b1b3873aa","reportUrl":"https://nova-wallet.github.io/test-runner/2233//#testresult/cee6e0b1b3873aa","status":"passed","time":{"start":1673150742003,"stop":1673150742077,"duration":74}},{"uid":"9c37e14b1965aa8f","reportUrl":"https://nova-wallet.github.io/test-runner/2232//#testresult/9c37e14b1965aa8f","status":"passed","time":{"start":1673136889155,"stop":1673136889201,"duration":46}},{"uid":"f88bca56eceba7e2","reportUrl":"https://nova-wallet.github.io/test-runner/2231//#testresult/f88bca56eceba7e2","status":"broken","statusDetails":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","time":{"start":1673121911984,"stop":1673121971235,"duration":59251}},{"uid":"af59efa8dcfb222f","reportUrl":"https://nova-wallet.github.io/test-runner/2229//#testresult/af59efa8dcfb222f","status":"passed","time":{"start":1673093091466,"stop":1673093091534,"duration":68}},{"uid":"9c9a75c2200bd8d3","reportUrl":"https://nova-wallet.github.io/test-runner/2228//#testresult/9c9a75c2200bd8d3","status":"passed","time":{"start":1673078686320,"stop":1673078701963,"duration":15643}},{"uid":"6d8cf80d1172c4ce","reportUrl":"https://nova-wallet.github.io/test-runner/2227//#testresult/6d8cf80d1172c4ce","status":"passed","time":{"start":1673064279643,"stop":1673064279837,"duration":194}}]},"tags":[]},"source":"a44bb3cf0d913dd.json","parameterValues":["{'url': 'wss://pichiu.api.onfinality.io/public-ws', 'name': 'Pichiu'}"]}
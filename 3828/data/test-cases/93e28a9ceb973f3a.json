{"uid":"93e28a9ceb973f3a","name":"test_rpc_node_is_synced[Test for Ethereum, url: https://rpc.flashbots.net]","fullName":"tests.test_eth_nodes_availability.TestETHNodesAvailability#test_rpc_node_is_synced","historyId":"53f1fa2f4a4225b0df7d282ad6e0c8f4","time":{"start":1695571283439,"stop":1695571288406,"duration":4967},"status":"broken","statusMessage":"websockets.exceptions.ConnectionClosedError: received 1011 (unexpected error) Internal response error; then sent 1011 (unexpected error) Internal response error","statusTrace":"self = <tests.test_eth_nodes_availability.TestETHNodesAvailability object at 0x7ffa374e3550>\ndata = {'name': 'Ethereum', 'url': 'https://rpc.flashbots.net'}\n\n    def test_rpc_node_is_synced(self, data):\n    \n        wss_w3 = Web3(Web3.WebsocketProvider('wss://mainnet.infura.io/ws/v3/32a2be59297444c9bcb2b61bb700c6fe'))\n        # Check if connected to wss node\n        assert wss_w3.is_connected(), \"Failed to connect to Ethereum wss node\"\n    \n        w3_rpc = Web3(Web3.HTTPProvider(data['url']))\n        # Check if connected to RPC node\n        assert w3_rpc.is_connected(), \"Failed to connect to Ethereum RPC node\"\n    \n        # Get the latest block number from nodes\n        rpc_block_number = w3_rpc.eth.block_number\n>       wss_block_number = wss_w3.eth.block_number\n\ntests/test_eth_nodes_availability.py:41: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n.venv/lib/python3.10/site-packages/web3/eth/eth.py:133: in block_number\n    return self.get_block_number()\n.venv/lib/python3.10/site-packages/web3/module.py:68: in caller\n    result = w3.manager.request_blocking(\n.venv/lib/python3.10/site-packages/web3/manager.py:231: in request_blocking\n    response = self._make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/manager.py:175: in _make_request\n    return request_func(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/formatting.py:99: in middleware\n    response = make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/gas_price_strategy.py:96: in middleware\n    return make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/formatting.py:99: in middleware\n    response = make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/attrdict.py:38: in middleware\n    response = make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/formatting.py:99: in middleware\n    response = make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/formatting.py:99: in middleware\n    response = make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/formatting.py:99: in middleware\n    response = make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/middleware/buffered_gas_estimate.py:43: in middleware\n    return make_request(method, params)\n.venv/lib/python3.10/site-packages/web3/providers/websocket.py:135: in make_request\n    return future.result()\n/usr/lib/python3.10/concurrent/futures/_base.py:458: in result\n    return self.__get_result()\n/usr/lib/python3.10/concurrent/futures/_base.py:403: in __get_result\n    raise self._exception\n.venv/lib/python3.10/site-packages/web3/providers/websocket.py:124: in coro_make_request\n    await asyncio.wait_for(conn.recv(), timeout=self.websocket_timeout)\n/usr/lib/python3.10/asyncio/tasks.py:445: in wait_for\n    return fut.result()\n.venv/lib/python3.10/site-packages/websockets/legacy/protocol.py:568: in recv\n    await self.ensure_open()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <websockets.legacy.client.WebSocketClientProtocol object at 0x7ffa37428040>\n\n    async def ensure_open(self) -> None:\n        \"\"\"\n        Check that the WebSocket connection is open.\n    \n        Raise :exc:`~websockets.exceptions.ConnectionClosed` if it isn't.\n    \n        \"\"\"\n        # Handle cases from most common to least common for performance.\n        if self.state is State.OPEN:\n            # If self.transfer_data_task exited without a closing handshake,\n            # self.close_connection_task may be closing the connection, going\n            # straight from OPEN to CLOSED.\n            if self.transfer_data_task.done():\n                await asyncio.shield(self.close_connection_task)\n                raise self.connection_closed_exc()\n            else:\n                return\n    \n        if self.state is State.CLOSED:\n            raise self.connection_closed_exc()\n    \n        if self.state is State.CLOSING:\n            # If we started the closing handshake, wait for its completion to\n            # get the proper close code and reason. self.close_connection_task\n            # will complete within 4 or 5 * close_timeout after close(). The\n            # CLOSING state also occurs when failing the connection. In that\n            # case self.close_connection_task will complete even faster.\n            await asyncio.shield(self.close_connection_task)\n>           raise self.connection_closed_exc()\nE           websockets.exceptions.ConnectionClosedError: received 1011 (unexpected error) Internal response error; then sent 1011 (unexpected error) Internal response error\n\n.venv/lib/python3.10/site-packages/websockets/legacy/protocol.py:944: ConnectionClosedError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_eth_nodes_availability"},{"name":"subSuite","value":"TestETHNodesAvailability"},{"name":"host","value":"fv-az442-347"},{"name":"thread","value":"2077-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_eth_nodes_availability"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"data","value":"{'url': 'https://rpc.flashbots.net', 'name': 'Ethereum'}"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"93e28a9ceb973f3a.json","parameterValues":["{'url': 'https://rpc.flashbots.net', 'name': 'Ethereum'}"]}
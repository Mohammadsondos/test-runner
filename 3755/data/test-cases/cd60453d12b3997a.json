{"uid":"cd60453d12b3997a","name":"test_can_create_connection[Test for Khala, url: wss://khala-api.phala.network/ws]","fullName":"tests.test_nodes_availability#test_can_create_connection","historyId":"b9ef5d231f3ccda572f27ab1ee01534b","time":{"start":1694534520666,"stop":1694534521085,"duration":419},"status":"broken","statusMessage":"websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 16:02:01 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=FmGz1sRuc8xsx%2Fliyphl%2Bw%2BDILzr8mXk%2BBaaXj%2Fh69rEHgHBjKC7zL%2BklcugAVo3JIQFGfBqSTEa5tB6I9IFMWBsMGt1M67p0JK0z63iPqJ2%2FZwNKfvqF406WxZv42XTof3hw%2BnSi4anDg%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '80595f5279b40bb8-DFW'} -+-+- b'Too many connections. Please try again later.'","statusTrace":"data = {'name': 'Khala', 'url': 'wss://khala-api.phala.network/ws'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n.venv/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n.venv/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nsuccess_statuses = (<HTTPStatus.MOVED_PERMANENTLY: 301>, <HTTPStatus.FOUND: 302>, <HTTPStatus.SEE_OTHER: 303>, <HTTPStatus.SWITCHING_PROTOCOLS: 101>)\n\n    def _get_resp_headers(sock, success_statuses: tuple = SUCCESS_STATUSES) -> tuple:\n        status, resp_headers, status_message = read_headers(sock)\n        if status not in success_statuses:\n            content_len = resp_headers.get('content-length')\n            if content_len:\n                response_body = sock.recv(int(content_len))  # read the body of the HTTP error message response and include it in the exception\n            else:\n                response_body = None\n>           raise WebSocketBadStatusException(\"Handshake status {status} {message} -+-+- {headers} -+-+- {body}\".format(status=status, message=status_message, headers=resp_headers, body=response_body), status, status_message, resp_headers, response_body)\nE           websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 16:02:01 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=FmGz1sRuc8xsx%2Fliyphl%2Bw%2BDILzr8mXk%2BBaaXj%2Fh69rEHgHBjKC7zL%2BklcugAVo3JIQFGfBqSTEa5tB6I9IFMWBsMGt1M67p0JK0z63iPqJ2%2FZwNKfvqF406WxZv42XTof3hw%2BnSi4anDg%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '80595f5279b40bb8-DFW'} -+-+- b'Too many connections. Please try again later.'\n\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:150: WebSocketBadStatusException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 16:02:01 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=FmGz1sRuc8xsx%2Fliyphl%2Bw%2BDILzr8mXk%2BBaaXj%2Fh69rEHgHBjKC7zL%2BklcugAVo3JIQFGfBqSTEa5tB6I9IFMWBsMGt1M67p0JK0z63iPqJ2%2FZwNKfvqF406WxZv42XTof3hw%2BnSi4anDg%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '80595f5279b40bb8-DFW'} -+-+- b'Too many connections. Please try again later.'","statusTrace":"data = {'name': 'Khala', 'url': 'wss://khala-api.phala.network/ws'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n.venv/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n.venv/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nsuccess_statuses = (<HTTPStatus.MOVED_PERMANENTLY: 301>, <HTTPStatus.FOUND: 302>, <HTTPStatus.SEE_OTHER: 303>, <HTTPStatus.SWITCHING_PROTOCOLS: 101>)\n\n    def _get_resp_headers(sock, success_statuses: tuple = SUCCESS_STATUSES) -> tuple:\n        status, resp_headers, status_message = read_headers(sock)\n        if status not in success_statuses:\n            content_len = resp_headers.get('content-length')\n            if content_len:\n                response_body = sock.recv(int(content_len))  # read the body of the HTTP error message response and include it in the exception\n            else:\n                response_body = None\n>           raise WebSocketBadStatusException(\"Handshake status {status} {message} -+-+- {headers} -+-+- {body}\".format(status=status, message=status_message, headers=resp_headers, body=response_body), status, status_message, resp_headers, response_body)\nE           websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 16:02:01 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=FmGz1sRuc8xsx%2Fliyphl%2Bw%2BDILzr8mXk%2BBaaXj%2Fh69rEHgHBjKC7zL%2BklcugAVo3JIQFGfBqSTEa5tB6I9IFMWBsMGt1M67p0JK0z63iPqJ2%2FZwNKfvqF406WxZv42XTof3hw%2BnSi4anDg%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '80595f5279b40bb8-DFW'} -+-+- b'Too many connections. Please try again later.'\n\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:150: WebSocketBadStatusException","steps":[],"attachments":[{"uid":"e70e62c3629138ac","name":"stdout","source":"e70e62c3629138ac.txt","type":"text/plain","size":2352}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_nodes_availability"},{"name":"host","value":"fv-az422-184"},{"name":"thread","value":"2052-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_nodes_availability"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"data","value":"{'url': 'wss://khala-api.phala.network/ws', 'name': 'Khala'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"394818a18c0329f","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 16:01:45 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=cavtkjVjI8hATDs8YF0GmAztG0iwy7%2Bu6U1j2m92im9knV10Gz2YiuprCUfweNBZJ2IoH1JdbEwccJpFeJ2GYdjfATUs36nefDobPtUxH9a5nunY9wA1Dl62VQdIRnb4Nkhx2pNZLrGohA%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '80595ef189020bb8-DFW'} -+-+- b'Too many connections. Please try again later.'","time":{"start":1694534505154,"stop":1694534505573,"duration":419}},{"uid":"ed37a9bf27ebb73a","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 16:01:29 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=%2BC1Vre9uKuh%2BuiVQEZ1mdUmEV9GAi8zyf7UWENhdqfUipjQYav0Km%2FIFV3AdoKDNFDmeroU%2FwaeA9zWELHpwnwuObDgKRWiwX7X%2FNseNfB57VwAw4%2FP0cDvDlNcW6TF5INGdM6Lv4s338Q%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '80595e905b7d2869-DFW'} -+-+- b'Too many connections. Please try again later.'","time":{"start":1694534489562,"stop":1694534490010,"duration":448}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":113,"unknown":0,"total":116},"items":[{"uid":"d9a3bd5bb2186db3","reportUrl":"https://novasamatech.github.io/test-runner/3754//#testresult/d9a3bd5bb2186db3","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 429 Too Many Requests -+-+- {'date': 'Tue, 12 Sep 2023 12:02:38 GMT', 'content-type': 'text/plain', 'content-length': '45', 'connection': 'keep-alive', 'alt-svc': 'h3=\":443\"; ma=86400', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=ycXV9Lo6Qe0I702APo3XvVicKIkUaxtkfzLy%2F51uBTRraW5by%2Bu1jrLeNTURyjm1S0E908dgkFRqHAdQKQG4Xyq9NkcCBg%2Bntk6M%2FEri%2FmjdPMatZsIxmwbVSublk2XslWox%2FWrwmxu3Qw%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '805800ab0e6e0808-IAD'} -+-+- b'Too many connections. Please try again later.'","time":{"start":1694520157897,"stop":1694520158185,"duration":288}},{"uid":"ce275feaf842586c","reportUrl":"https://novasamatech.github.io/test-runner/3753//#testresult/ce275feaf842586c","status":"passed","time":{"start":1694505685640,"stop":1694505685992,"duration":352}},{"uid":"8c27bd5044ea9e44","reportUrl":"https://novasamatech.github.io/test-runner/3752//#testresult/8c27bd5044ea9e44","status":"passed","time":{"start":1694491292554,"stop":1694491293153,"duration":599}},{"uid":"36316b361972288c","reportUrl":"https://novasamatech.github.io/test-runner/3751//#testresult/36316b361972288c","status":"passed","time":{"start":1694476928096,"stop":1694476928757,"duration":661}},{"uid":"fe2d97d5ba8a9272","reportUrl":"https://novasamatech.github.io/test-runner/3750//#testresult/fe2d97d5ba8a9272","status":"passed","time":{"start":1694462504570,"stop":1694462504964,"duration":394}},{"uid":"84a0c14cb43ddb82","reportUrl":"https://novasamatech.github.io/test-runner/3749//#testresult/84a0c14cb43ddb82","status":"passed","time":{"start":1694448124569,"stop":1694448125242,"duration":673}},{"uid":"86ac6821c8cb51a1","reportUrl":"https://novasamatech.github.io/test-runner/3748//#testresult/86ac6821c8cb51a1","status":"passed","time":{"start":1694433720158,"stop":1694433721003,"duration":845}},{"uid":"dd0112ea871d7cdc","reportUrl":"https://novasamatech.github.io/test-runner/3747//#testresult/dd0112ea871d7cdc","status":"passed","time":{"start":1694419321333,"stop":1694419321722,"duration":389}},{"uid":"c5b67560134ead1e","reportUrl":"https://novasamatech.github.io/test-runner/3746//#testresult/c5b67560134ead1e","status":"passed","time":{"start":1694404896934,"stop":1694404897293,"duration":359}},{"uid":"1106de14cd621a18","reportUrl":"https://novasamatech.github.io/test-runner/3745//#testresult/1106de14cd621a18","status":"passed","time":{"start":1694390552382,"stop":1694390553029,"duration":647}},{"uid":"4fede26fd93ff5ff","reportUrl":"https://novasamatech.github.io/test-runner/3744//#testresult/4fede26fd93ff5ff","status":"passed","time":{"start":1694376100004,"stop":1694376100567,"duration":563}},{"uid":"ca6433f25a0875a7","reportUrl":"https://novasamatech.github.io/test-runner/3743//#testresult/ca6433f25a0875a7","status":"passed","time":{"start":1694361703939,"stop":1694361704535,"duration":596}},{"uid":"3f2ab66a24a4c047","reportUrl":"https://novasamatech.github.io/test-runner/3742//#testresult/3f2ab66a24a4c047","status":"passed","time":{"start":1694347283649,"stop":1694347284037,"duration":388}},{"uid":"bc1a00544b4f89e9","reportUrl":"https://novasamatech.github.io/test-runner/3741//#testresult/bc1a00544b4f89e9","status":"passed","time":{"start":1694332886503,"stop":1694332887091,"duration":588}},{"uid":"4ddf6d11c2ad9943","reportUrl":"https://novasamatech.github.io/test-runner/3740//#testresult/4ddf6d11c2ad9943","status":"passed","time":{"start":1694318484973,"stop":1694318485345,"duration":372}},{"uid":"2ecad48ef3a45578","reportUrl":"https://novasamatech.github.io/test-runner/3739//#testresult/2ecad48ef3a45578","status":"passed","time":{"start":1694304144775,"stop":1694304145664,"duration":889}},{"uid":"a16399b38faf2596","reportUrl":"https://novasamatech.github.io/test-runner/3738//#testresult/a16399b38faf2596","status":"passed","time":{"start":1694289683868,"stop":1694289684246,"duration":378}},{"uid":"14522455c226706f","reportUrl":"https://novasamatech.github.io/test-runner/3737//#testresult/14522455c226706f","status":"passed","time":{"start":1694275315069,"stop":1694275315483,"duration":414}},{"uid":"f83950fa8bedd5af","reportUrl":"https://novasamatech.github.io/test-runner/3736//#testresult/f83950fa8bedd5af","status":"passed","time":{"start":1694260901714,"stop":1694260902214,"duration":500}},{"uid":"68b86353eb53f2b3","reportUrl":"https://novasamatech.github.io/test-runner/3735//#testresult/68b86353eb53f2b3","status":"passed","time":{"start":1694246518188,"stop":1694246518664,"duration":476}}]},"tags":[]},"source":"cd60453d12b3997a.json","parameterValues":["{'url': 'wss://khala-api.phala.network/ws', 'name': 'Khala'}"]}
{"uid":"c2a2a7637dc0695f","name":"test_can_create_connection[Test for Khala, url: wss://khala-api.phala.network/ws]","fullName":"tests.test_nodes_availability#test_can_create_connection","historyId":"b9ef5d231f3ccda572f27ab1ee01534b","time":{"start":1693771403871,"stop":1693771450160,"duration":46289},"status":"broken","statusMessage":"websocket._exceptions.WebSocketBadStatusException: Handshake status 522 None -+-+- {'date': 'Sun, 03 Sep 2023 20:04:10 GMT', 'content-length': '0', 'connection': 'keep-alive', 'cache-control': 'no-store, no-cache', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=7c2kOH%2B4NOaDOghdHBr%2FgBZzMAwTYSGQgWI%2Fohbn0c7XTGGe1OStb0wKVKy%2F3xLFWSVv%2BOagjSIhKCW3P0J5ijOmHk1vrHmX9qsd%2BNWGWm60r5NB9pEGcOOspccP4ALLaW96fP0QXD3mjQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '8010988a7a67e82f-DFW', 'alt-svc': 'h3=\":443\"; ma=86400'} -+-+- b''","statusTrace":"data = {'name': 'Khala', 'url': 'wss://khala-api.phala.network/ws'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n.venv/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n.venv/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nsuccess_statuses = (<HTTPStatus.MOVED_PERMANENTLY: 301>, <HTTPStatus.FOUND: 302>, <HTTPStatus.SEE_OTHER: 303>, <HTTPStatus.SWITCHING_PROTOCOLS: 101>)\n\n    def _get_resp_headers(sock, success_statuses: tuple = SUCCESS_STATUSES) -> tuple:\n        status, resp_headers, status_message = read_headers(sock)\n        if status not in success_statuses:\n            content_len = resp_headers.get('content-length')\n            if content_len:\n                response_body = sock.recv(int(content_len))  # read the body of the HTTP error message response and include it in the exception\n            else:\n                response_body = None\n>           raise WebSocketBadStatusException(\"Handshake status {status} {message} -+-+- {headers} -+-+- {body}\".format(status=status, message=status_message, headers=resp_headers, body=response_body), status, status_message, resp_headers, response_body)\nE           websocket._exceptions.WebSocketBadStatusException: Handshake status 522 None -+-+- {'date': 'Sun, 03 Sep 2023 20:04:10 GMT', 'content-length': '0', 'connection': 'keep-alive', 'cache-control': 'no-store, no-cache', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=7c2kOH%2B4NOaDOghdHBr%2FgBZzMAwTYSGQgWI%2Fohbn0c7XTGGe1OStb0wKVKy%2F3xLFWSVv%2BOagjSIhKCW3P0J5ijOmHk1vrHmX9qsd%2BNWGWm60r5NB9pEGcOOspccP4ALLaW96fP0QXD3mjQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '8010988a7a67e82f-DFW', 'alt-svc': 'h3=\":443\"; ma=86400'} -+-+- b''\n\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:150: WebSocketBadStatusException","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"websocket._exceptions.WebSocketBadStatusException: Handshake status 522 None -+-+- {'date': 'Sun, 03 Sep 2023 20:04:10 GMT', 'content-length': '0', 'connection': 'keep-alive', 'cache-control': 'no-store, no-cache', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=7c2kOH%2B4NOaDOghdHBr%2FgBZzMAwTYSGQgWI%2Fohbn0c7XTGGe1OStb0wKVKy%2F3xLFWSVv%2BOagjSIhKCW3P0J5ijOmHk1vrHmX9qsd%2BNWGWm60r5NB9pEGcOOspccP4ALLaW96fP0QXD3mjQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '8010988a7a67e82f-DFW', 'alt-svc': 'h3=\":443\"; ma=86400'} -+-+- b''","statusTrace":"data = {'name': 'Khala', 'url': 'wss://khala-api.phala.network/ws'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n.venv/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n.venv/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nsuccess_statuses = (<HTTPStatus.MOVED_PERMANENTLY: 301>, <HTTPStatus.FOUND: 302>, <HTTPStatus.SEE_OTHER: 303>, <HTTPStatus.SWITCHING_PROTOCOLS: 101>)\n\n    def _get_resp_headers(sock, success_statuses: tuple = SUCCESS_STATUSES) -> tuple:\n        status, resp_headers, status_message = read_headers(sock)\n        if status not in success_statuses:\n            content_len = resp_headers.get('content-length')\n            if content_len:\n                response_body = sock.recv(int(content_len))  # read the body of the HTTP error message response and include it in the exception\n            else:\n                response_body = None\n>           raise WebSocketBadStatusException(\"Handshake status {status} {message} -+-+- {headers} -+-+- {body}\".format(status=status, message=status_message, headers=resp_headers, body=response_body), status, status_message, resp_headers, response_body)\nE           websocket._exceptions.WebSocketBadStatusException: Handshake status 522 None -+-+- {'date': 'Sun, 03 Sep 2023 20:04:10 GMT', 'content-length': '0', 'connection': 'keep-alive', 'cache-control': 'no-store, no-cache', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=7c2kOH%2B4NOaDOghdHBr%2FgBZzMAwTYSGQgWI%2Fohbn0c7XTGGe1OStb0wKVKy%2F3xLFWSVv%2BOagjSIhKCW3P0J5ijOmHk1vrHmX9qsd%2BNWGWm60r5NB9pEGcOOspccP4ALLaW96fP0QXD3mjQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '8010988a7a67e82f-DFW', 'alt-svc': 'h3=\":443\"; ma=86400'} -+-+- b''\n\n.venv/lib/python3.10/site-packages/websocket/_handshake.py:150: WebSocketBadStatusException","steps":[],"attachments":[{"uid":"cd0fc99f509313e1","name":"stdout","source":"cd0fc99f509313e1.txt","type":"text/plain","size":2194}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_nodes_availability"},{"name":"host","value":"fv-az585-898"},{"name":"thread","value":"2038-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_nodes_availability"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"data","value":"{'url': 'wss://khala-api.phala.network/ws', 'name': 'Khala'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5dfe2703c9a1da04","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 522 None -+-+- {'date': 'Sun, 03 Sep 2023 20:03:08 GMT', 'content-length': '0', 'connection': 'keep-alive', 'cache-control': 'no-store, no-cache', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=Ia5XoxOCS6l2uwfdIpAkEnCWMn7UpW3l7dcfCBLRoHg6NQsifitlnTTtANkCsz26UVq7vDc%2FRs%2B%2F03Q7T2vJqndfwAVPJDN4xuXwLZo9pnI79VfMNsNlcHoYuv08d5Nhg78Og2tRWZGPbw%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '8010976ba905e82f-DFW', 'alt-svc': 'h3=\":443\"; ma=86400'} -+-+- b''","time":{"start":1693771357977,"stop":1693771388716,"duration":30739}},{"uid":"b01d53c26efe8bd4","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 522 None -+-+- {'date': 'Sun, 03 Sep 2023 20:02:22 GMT', 'content-length': '0', 'connection': 'keep-alive', 'cache-control': 'no-store, no-cache', 'cf-cache-status': 'DYNAMIC', 'report-to': '{\"endpoints\":[{\"url\":\"https:\\\\/\\\\/a.nel.cloudflare.com\\\\/report\\\\/v3?s=SdXlgLSGoZocUObsqZuC5yesXZWnGMNZnQisUL43Ss503aj%2BTW7My1KwzKK7bDW64NCGnPeYhySnpYE7xiScduIcnpUni5Fgtt7wicWlWom52EQvZ1KE9n6iybMLk1%2B109JfOHujdTN3aQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}', 'nel': '{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}', 'server': 'cloudflare', 'cf-ray': '801096493b12e74a-DFW', 'alt-svc': 'h3=\":443\"; ma=86400'} -+-+- b''","time":{"start":1693771311455,"stop":1693771342869,"duration":31414}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":63,"unknown":0,"total":64},"items":[{"uid":"d690a9decb68e6bc","reportUrl":"https://novasamatech.github.io/test-runner/3701//#testresult/d690a9decb68e6bc","status":"passed","time":{"start":1693756897958,"stop":1693756898632,"duration":674}},{"uid":"8000448302d97e81","reportUrl":"https://novasamatech.github.io/test-runner/3700//#testresult/8000448302d97e81","status":"passed","time":{"start":1693742501183,"stop":1693742501748,"duration":565}},{"uid":"e4c0e62275e73102","reportUrl":"https://novasamatech.github.io/test-runner/3699//#testresult/e4c0e62275e73102","status":"passed","time":{"start":1693728098570,"stop":1693728098935,"duration":365}},{"uid":"afa184fb6f45c258","reportUrl":"https://novasamatech.github.io/test-runner/3698//#testresult/afa184fb6f45c258","status":"passed","time":{"start":1693713686225,"stop":1693713686829,"duration":604}},{"uid":"165ce1fcc8c71481","reportUrl":"https://novasamatech.github.io/test-runner/3697//#testresult/165ce1fcc8c71481","status":"passed","time":{"start":1693699334290,"stop":1693699334666,"duration":376}},{"uid":"857eabb379ffbb25","reportUrl":"https://novasamatech.github.io/test-runner/3696//#testresult/857eabb379ffbb25","status":"passed","time":{"start":1693684903973,"stop":1693684904570,"duration":597}},{"uid":"8a35af2f479857f9","reportUrl":"https://novasamatech.github.io/test-runner/3695//#testresult/8a35af2f479857f9","status":"passed","time":{"start":1693670481964,"stop":1693670482354,"duration":390}},{"uid":"60836577748d3bfb","reportUrl":"https://novasamatech.github.io/test-runner/3694//#testresult/60836577748d3bfb","status":"passed","time":{"start":1693656088463,"stop":1693656088839,"duration":376}},{"uid":"aa70cb42ec63b72a","reportUrl":"https://novasamatech.github.io/test-runner/3693//#testresult/aa70cb42ec63b72a","status":"passed","time":{"start":1693641683990,"stop":1693641684390,"duration":400}},{"uid":"7867cb3891644b65","reportUrl":"https://novasamatech.github.io/test-runner/3692//#testresult/7867cb3891644b65","status":"passed","time":{"start":1693627295032,"stop":1693627295591,"duration":559}},{"uid":"3b7033b2690ac56d","reportUrl":"https://novasamatech.github.io/test-runner/3691//#testresult/3b7033b2690ac56d","status":"passed","time":{"start":1693612962194,"stop":1693612962598,"duration":404}},{"uid":"b12ea8c5dee4d717","reportUrl":"https://novasamatech.github.io/test-runner/3690//#testresult/b12ea8c5dee4d717","status":"passed","time":{"start":1693598528017,"stop":1693598528590,"duration":573}},{"uid":"274dc0d1486f6995","reportUrl":"https://novasamatech.github.io/test-runner/3689//#testresult/274dc0d1486f6995","status":"passed","time":{"start":1693584162841,"stop":1693584163424,"duration":583}},{"uid":"3165892a2e4ad4d2","reportUrl":"https://novasamatech.github.io/test-runner/3688//#testresult/3165892a2e4ad4d2","status":"passed","time":{"start":1693569739604,"stop":1693569740216,"duration":612}},{"uid":"f3c4423096744d94","reportUrl":"https://novasamatech.github.io/test-runner/3687//#testresult/f3c4423096744d94","status":"passed","time":{"start":1693556144049,"stop":1693556144622,"duration":573}},{"uid":"8220d2db02c3431f","reportUrl":"https://novasamatech.github.io/test-runner/3686//#testresult/8220d2db02c3431f","status":"passed","time":{"start":1693540896593,"stop":1693540897261,"duration":668}},{"uid":"e8bbb36cd3f1d26e","reportUrl":"https://novasamatech.github.io/test-runner/3685//#testresult/e8bbb36cd3f1d26e","status":"passed","time":{"start":1693526578071,"stop":1693526578641,"duration":570}},{"uid":"e4df4b0108eb18fd","reportUrl":"https://novasamatech.github.io/test-runner/3684//#testresult/e4df4b0108eb18fd","status":"passed","time":{"start":1693512160376,"stop":1693512161026,"duration":650}},{"uid":"4e589182c54d850f","reportUrl":"https://novasamatech.github.io/test-runner/3683//#testresult/4e589182c54d850f","status":"passed","time":{"start":1693497733818,"stop":1693497734231,"duration":413}},{"uid":"b47cf3d27018ee79","reportUrl":"https://novasamatech.github.io/test-runner/3682//#testresult/b47cf3d27018ee79","status":"passed","time":{"start":1693483312191,"stop":1693483312894,"duration":703}}]},"tags":[]},"source":"c2a2a7637dc0695f.json","parameterValues":["{'url': 'wss://khala-api.phala.network/ws', 'name': 'Khala'}"]}
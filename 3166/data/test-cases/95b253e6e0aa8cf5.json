{"uid":"95b253e6e0aa8cf5","name":"test_can_create_connection[Test for Pichiu, url: wss://kusama.kylin-node.co.uk]","fullName":"tests.test_nodes_availability#test_can_create_connection","historyId":"43f9a3f242d3a4a5d24c7320862b4e4b","time":{"start":1686168281270,"stop":1686168281549,"duration":279},"status":"broken","statusMessage":"websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 20:04:41 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'","statusTrace":"data = {'name': 'Pichiu', 'url': 'wss://kusama.kylin-node.co.uk'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nsuccess_statuses = (<HTTPStatus.MOVED_PERMANENTLY: 301>, <HTTPStatus.FOUND: 302>, <HTTPStatus.SEE_OTHER: 303>, <HTTPStatus.SWITCHING_PROTOCOLS: 101>)\n\n    def _get_resp_headers(sock, success_statuses=SUCCESS_STATUSES):\n        status, resp_headers, status_message = read_headers(sock)\n        if status not in success_statuses:\n            response_body = sock.recv(int(resp_headers['content-length']))  # read the body of the HTTP error message response and include it in the exception\n>           raise WebSocketBadStatusException(\"Handshake status {status} {message} -+-+- {headers} -+-+- {body}\".format(status=status, message=status_message, headers=resp_headers, body=response_body), status, status_message, resp_headers, response_body)\nE           websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 20:04:41 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'\n\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:148: WebSocketBadStatusException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 20:04:41 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'","statusTrace":"data = {'name': 'Pichiu', 'url': 'wss://kusama.kylin-node.co.uk'}\n\n    @pytest.mark.parametrize(\"data\", collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def test_can_create_connection(data):\n    \n>       connectin = create_connection_by_url(data[\"url\"])\n\ntests/test_nodes_availability.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nscripts/utils/substrate_interface.py:30: in create_connection_by_url\n    substrate = SubstrateInterface(\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:627: in __init__\n    self.connect_websocket()\n../../../../.local/lib/python3.10/site-packages/substrateinterface/base.py:665: in connect_websocket\n    self.websocket = create_connection(\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:608: in create_connection\n    websock.connect(url, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_core.py:253: in connect\n    self.handshake_response = handshake(self.sock, url, *addrs, **options)\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:57: in handshake\n    status, resp = _get_resp_headers(sock)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nsuccess_statuses = (<HTTPStatus.MOVED_PERMANENTLY: 301>, <HTTPStatus.FOUND: 302>, <HTTPStatus.SEE_OTHER: 303>, <HTTPStatus.SWITCHING_PROTOCOLS: 101>)\n\n    def _get_resp_headers(sock, success_statuses=SUCCESS_STATUSES):\n        status, resp_headers, status_message = read_headers(sock)\n        if status not in success_statuses:\n            response_body = sock.recv(int(resp_headers['content-length']))  # read the body of the HTTP error message response and include it in the exception\n>           raise WebSocketBadStatusException(\"Handshake status {status} {message} -+-+- {headers} -+-+- {body}\".format(status=status, message=status_message, headers=resp_headers, body=response_body), status, status_message, resp_headers, response_body)\nE           websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 20:04:41 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'\n\n../../../../.local/lib/python3.10/site-packages/websocket/_handshake.py:148: WebSocketBadStatusException","steps":[],"attachments":[{"uid":"9050a6f12bd200d6","name":"stdout","source":"9050a6f12bd200d6.txt","type":"text/plain","size":1404}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_nodes_availability"},{"name":"host","value":"fv-az620-574"},{"name":"thread","value":"1880-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_nodes_availability"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"data","value":"{'url': 'wss://kusama.kylin-node.co.uk', 'name': 'Pichiu'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5dd1b34503f0966f","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 20:04:26 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'","time":{"start":1686168265883,"stop":1686168266162,"duration":279}},{"uid":"c49884d36420ce32","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 20:04:10 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'","time":{"start":1686168250395,"stop":1686168250705,"duration":310}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":205,"unknown":0,"total":207},"items":[{"uid":"80278c86637aae24","reportUrl":"https://novasamatech.github.io/test-runner/3165//#testresult/80278c86637aae24","status":"broken","statusDetails":"websocket._exceptions.WebSocketBadStatusException: Handshake status 502 Bad Gateway -+-+- {'date': 'Wed, 07 Jun 2023 16:04:55 GMT', 'content-type': 'text/html', 'content-length': '166', 'connection': 'keep-alive', 'server': 'nginx/1.18.0 (Ubuntu)'} -+-+- b'<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body>\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx/1.18.0 (Ubuntu)</center>\\r\\n</body>\\r\\n</html>\\r\\n'","time":{"start":1686153895045,"stop":1686153895285,"duration":240}},{"uid":"a7020ef794394946","reportUrl":"https://novasamatech.github.io/test-runner/3164//#testresult/a7020ef794394946","status":"passed","time":{"start":1686139490300,"stop":1686139490357,"duration":57}},{"uid":"5715306c5ad3a211","reportUrl":"https://novasamatech.github.io/test-runner/3163//#testresult/5715306c5ad3a211","status":"passed","time":{"start":1686125060546,"stop":1686125060965,"duration":419}},{"uid":"ac4543522c543e55","reportUrl":"https://novasamatech.github.io/test-runner/3162//#testresult/ac4543522c543e55","status":"passed","time":{"start":1686110652956,"stop":1686110653067,"duration":111}},{"uid":"ea6390ae1584c7c6","reportUrl":"https://novasamatech.github.io/test-runner/3161//#testresult/ea6390ae1584c7c6","status":"passed","time":{"start":1686096847067,"stop":1686096847468,"duration":401}},{"uid":"658f0efef94032b6","reportUrl":"https://novasamatech.github.io/test-runner/3160//#testresult/658f0efef94032b6","status":"passed","time":{"start":1686081839220,"stop":1686081839545,"duration":325}},{"uid":"71073bca8fe70f1e","reportUrl":"https://novasamatech.github.io/test-runner/3159//#testresult/71073bca8fe70f1e","status":"passed","time":{"start":1686067457326,"stop":1686067457638,"duration":312}},{"uid":"8bc2c9ceed1a0884","reportUrl":"https://novasamatech.github.io/test-runner/3158//#testresult/8bc2c9ceed1a0884","status":"passed","time":{"start":1686053080028,"stop":1686053080448,"duration":420}},{"uid":"4e065a4d6075fb4f","reportUrl":"https://novasamatech.github.io/test-runner/3157//#testresult/4e065a4d6075fb4f","status":"passed","time":{"start":1686038659720,"stop":1686038659807,"duration":87}},{"uid":"3741689bcbe4a926","reportUrl":"https://novasamatech.github.io/test-runner/3156//#testresult/3741689bcbe4a926","status":"passed","time":{"start":1686024242422,"stop":1686024242574,"duration":152}},{"uid":"3e22e2ab4955c1d1","reportUrl":"https://novasamatech.github.io/test-runner/3155//#testresult/3e22e2ab4955c1d1","status":"passed","time":{"start":1686010455621,"stop":1686010455907,"duration":286}},{"uid":"eb524bbaf7606e6a","reportUrl":"https://novasamatech.github.io/test-runner/3154//#testresult/eb524bbaf7606e6a","status":"passed","time":{"start":1685995434484,"stop":1685995434577,"duration":93}},{"uid":"cb571f74af381382","reportUrl":"https://novasamatech.github.io/test-runner/3153//#testresult/cb571f74af381382","status":"passed","time":{"start":1685981044454,"stop":1685981044746,"duration":292}},{"uid":"b7ed639920302432","reportUrl":"https://novasamatech.github.io/test-runner/3152//#testresult/b7ed639920302432","status":"passed","time":{"start":1685966707202,"stop":1685966707443,"duration":241}},{"uid":"255a6cb756dab444","reportUrl":"https://novasamatech.github.io/test-runner/3151//#testresult/255a6cb756dab444","status":"passed","time":{"start":1685952240470,"stop":1685952240624,"duration":154}},{"uid":"9829f63ab9c69d48","reportUrl":"https://novasamatech.github.io/test-runner/3150//#testresult/9829f63ab9c69d48","status":"passed","time":{"start":1685937847921,"stop":1685937848013,"duration":92}},{"uid":"5baf775d37f842e5","reportUrl":"https://novasamatech.github.io/test-runner/3149//#testresult/5baf775d37f842e5","status":"passed","time":{"start":1685924075228,"stop":1685924075627,"duration":399}},{"uid":"c68e625090f79571","reportUrl":"https://novasamatech.github.io/test-runner/3148//#testresult/c68e625090f79571","status":"passed","time":{"start":1685909028330,"stop":1685909028473,"duration":143}},{"uid":"f5021b8ef17b00b9","reportUrl":"https://novasamatech.github.io/test-runner/3147//#testresult/f5021b8ef17b00b9","status":"passed","time":{"start":1685894649151,"stop":1685894649232,"duration":81}},{"uid":"4c990a231e07f833","reportUrl":"https://novasamatech.github.io/test-runner/3146//#testresult/4c990a231e07f833","status":"passed","time":{"start":1685880281063,"stop":1685880281274,"duration":211}}]},"tags":[]},"source":"95b253e6e0aa8cf5.json","parameterValues":["{'url': 'wss://kusama.kylin-node.co.uk', 'name': 'Pichiu'}"]}